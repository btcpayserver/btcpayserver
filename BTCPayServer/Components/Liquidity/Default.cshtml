@model BTCPayServer.Components.Liquidity.LiquidityViewModel
@using BTCPayServer.Lightning

@if (Model.HasLiquidityReport && Model.LiquidityReport != null)
{
    var status = Model.LiquidityReport.LiquidityStatus.ToString();
    var activeInbound = Model.LiquidityReport.ActiveInboundSatoshis;
    var pendingInbound = Model.LiquidityReport.PendingInboundSatoshis;

    <div class="mt-4 mb-4 p-3 bg-light rounded" id="liquidity-component">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span class="h4 mb-0">BTC Lightning Inbound Payment Capacity</span>

                @{
                    var badgeClass = status switch
                    {
                        "Good" => "bg-success",
                        "Pending" => "badge-unusual",
                        "Bad" => "bg-danger",
                        _ => "bg-secondary"
                    };
                }
                <span class="badge @badgeClass px-3 py-2">@status</span>
            </div>

            <!-- Center all body content -->
            <div class="card-body text-center">
                @if (status == "Good")
                {
                    <p class="card-text">
                        <strong>Active Inbound Capacity:</strong>
                        <span class="text-success">@activeInbound</span>
                    </p>
                }
                else if (status == "Pending")
                {
                    <p class="card-text">
                        <strong>Pending Inbound Capacity:</strong>
                        <span class="text-warning">@pendingInbound</span>
                    </p>
                    <p class="card-text small text-muted">
                        Your node has pending channels that, once confirmed, will provide sufficient inbound capacity.
                    </p>
                }
                else if (status == "Bad")
                {
                    <p class="card-text fs-5 fw-bold">
                        Warning: To receive Lightning payments you need a channel with inbound capacity
                    </p>
                    <p class="card-text">
                        Get a channel from a Lightning Service Provider to start receiving payments.
                    </p>
                    <a href="~/server/plugins?search=lsps-1" class="btn btn-primary mt-2 mb-2">Get Inbound Capacity</a>
                }
                <p class="card-text small mt-2 text-muted">@Model.Message</p>
            </div>
        </div>
    </div>
}
